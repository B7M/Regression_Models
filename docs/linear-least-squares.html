<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Linear least squares | Course Name</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Linear least squares | Course Name" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Linear least squares | Course Name" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/dasl_favicon.ico" type="image/x-icon" />
<link rel="prev" href="introduction-to-regression-and-least-squares.html"/>
<link rel="next" href="regression-to-the-mean.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="http://jhudatascience.org/"><img src="https://jhudatascience.org/images/dasl.png" style=" width: 80%; padding-left: 40px; padding-top: 8px; vertical-align: top "</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#available-course-formats"><i class="fa fa-check"></i><b>0.1</b> Available course formats</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-xxx.html"><a href="introduction-xxx.html"><i class="fa fa-check"></i><b>1</b> Introduction (xxx)</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-xxx.html"><a href="introduction-xxx.html#welcome-to-regression-models"><i class="fa fa-check"></i><b>1.1</b> Welcome to Regression Models</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-xxx.html"><a href="introduction-xxx.html#some-basics"><i class="fa fa-check"></i><b>1.2</b> Some Basics</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-xxx.html"><a href="introduction-xxx.html#youtube"><i class="fa fa-check"></i><b>1.2.1</b> YouTube</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-xxx.html"><a href="introduction-xxx.html#syllabus-xxx"><i class="fa fa-check"></i><b>1.3</b> Syllabus (xxx)</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-xxx.html"><a href="introduction-xxx.html#course-description"><i class="fa fa-check"></i><b>1.3.1</b> Course Description:</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-xxx.html"><a href="introduction-xxx.html#course-content"><i class="fa fa-check"></i><b>1.3.2</b> Course Content</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-xxx.html"><a href="introduction-xxx.html#book-regression-models-for-data-science-in-r."><i class="fa fa-check"></i><b>1.3.3</b> Book: Regression Models for Data Science in R.</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-xxx.html"><a href="introduction-xxx.html#quizzes"><i class="fa fa-check"></i><b>1.3.4</b> Quizzes</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction-xxx.html"><a href="introduction-xxx.html#course-project"><i class="fa fa-check"></i><b>1.3.5</b> Course Project</a></li>
<li class="chapter" data-level="1.3.6" data-path="introduction-xxx.html"><a href="introduction-xxx.html#grading-policy"><i class="fa fa-check"></i><b>1.3.6</b> Grading Policy</a></li>
<li class="chapter" data-level="1.3.7" data-path="introduction-xxx.html"><a href="introduction-xxx.html#differences-of-opinion"><i class="fa fa-check"></i><b>1.3.7</b> Differences of opinion</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-xxx.html"><a href="introduction-xxx.html#data-science-specialization-community-site"><i class="fa fa-check"></i><b>1.4</b> Data Science Specialization Community Site</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-xxx.html"><a href="introduction-xxx.html#where-to-get-more-advanced-material"><i class="fa fa-check"></i><b>1.5</b> Where to get more advanced material</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-regression-and-least-squares.html"><a href="introduction-to-regression-and-least-squares.html"><i class="fa fa-check"></i><b>2</b> Introduction to regression and least squares</a></li>
<li class="chapter" data-level="3" data-path="linear-least-squares.html"><a href="linear-least-squares.html"><i class="fa fa-check"></i><b>3</b> Linear least squares</a></li>
<li class="chapter" data-level="4" data-path="regression-to-the-mean.html"><a href="regression-to-the-mean.html"><i class="fa fa-check"></i><b>4</b> Regression to the Mean</a></li>
<li class="chapter" data-level="5" data-path="practical-r-exercises-in-swirl.html"><a href="practical-r-exercises-in-swirl.html"><i class="fa fa-check"></i><b>5</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="6" data-path="week-1-quiz.html"><a href="week-1-quiz.html"><i class="fa fa-check"></i><b>6</b> Week 1 Quiz</a></li>
<li class="chapter" data-level="7" data-path="statistical-linear-regression-models.html"><a href="statistical-linear-regression-models.html"><i class="fa fa-check"></i><b>7</b> Statistical linear regression models</a></li>
<li class="chapter" data-level="8" data-path="residuals.html"><a href="residuals.html"><i class="fa fa-check"></i><b>8</b> Residuals</a></li>
<li class="chapter" data-level="9" data-path="inference-in-regression.html"><a href="inference-in-regression.html"><i class="fa fa-check"></i><b>9</b> Inference in regression</a></li>
<li class="chapter" data-level="10" data-path="for-the-project.html"><a href="for-the-project.html"><i class="fa fa-check"></i><b>10</b> For the project</a></li>
<li class="chapter" data-level="11" data-path="practical-r-exercises-in-swirl-1.html"><a href="practical-r-exercises-in-swirl-1.html"><i class="fa fa-check"></i><b>11</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="12" data-path="week-2-quiz.html"><a href="week-2-quiz.html"><i class="fa fa-check"></i><b>12</b> Week 2 Quiz</a></li>
<li class="chapter" data-level="13" data-path="multivariable-regression.html"><a href="multivariable-regression.html"><i class="fa fa-check"></i><b>13</b> Multivariable regression</a></li>
<li class="chapter" data-level="14" data-path="multivariable-regression-tips-and-tricks.html"><a href="multivariable-regression-tips-and-tricks.html"><i class="fa fa-check"></i><b>14</b> Multivariable regression tips and tricks</a></li>
<li class="chapter" data-level="15" data-path="adjustment.html"><a href="adjustment.html"><i class="fa fa-check"></i><b>15</b> Adjustment</a></li>
<li class="chapter" data-level="16" data-path="residuals-again.html"><a href="residuals-again.html"><i class="fa fa-check"></i><b>16</b> Residuals again</a></li>
<li class="chapter" data-level="17" data-path="model-selection.html"><a href="model-selection.html"><i class="fa fa-check"></i><b>17</b> Model selection</a></li>
<li class="chapter" data-level="18" data-path="practical-r-exercises-in-swirl-2.html"><a href="practical-r-exercises-in-swirl-2.html"><i class="fa fa-check"></i><b>18</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="19" data-path="week-3-quiz.html"><a href="week-3-quiz.html"><i class="fa fa-check"></i><b>19</b> Week 3 Quiz</a></li>
<li class="chapter" data-level="20" data-path="optional-practice-exercise-in-regression-modeling.html"><a href="optional-practice-exercise-in-regression-modeling.html"><i class="fa fa-check"></i><b>20</b> (OPTIONAL) Practice exercise in regression modeling</a></li>
<li class="chapter" data-level="21" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>21</b> GLM</a></li>
<li class="chapter" data-level="22" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>22</b> Logistic Regression</a></li>
<li class="chapter" data-level="23" data-path="poisson-regression.html"><a href="poisson-regression.html"><i class="fa fa-check"></i><b>23</b> Poisson Regression</a></li>
<li class="chapter" data-level="24" data-path="hodgepodge.html"><a href="hodgepodge.html"><i class="fa fa-check"></i><b>24</b> Hodgepodge</a></li>
<li class="chapter" data-level="25" data-path="practical-r-exercises-in-swirl-3.html"><a href="practical-r-exercises-in-swirl-3.html"><i class="fa fa-check"></i><b>25</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="26" data-path="week-4-quiz.html"><a href="week-4-quiz.html"><i class="fa fa-check"></i><b>26</b> Week 4 Quiz</a></li>
<li class="chapter" data-level="27" data-path="course-project-1.html"><a href="course-project-1.html"><i class="fa fa-check"></i><b>27</b> Course Project</a></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="28" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>28</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by:</a> </p>
<p style="text-align:center;"> <a href="http://jhudatascience.org/"> The Johns Hopkins Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Course Name</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src= "https://github.com/jhudsl/OTTR_Template/raw/main/assets/dasl_thin_main_image.png">
</div>
<div id="linear-least-squares" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Linear least squares</h1>
<p>Let’s look at Francis Galton’s data, he first used this data in 1885. He’s really an interesting character in history, in general and definitely in the history of statistics. You need to run <code>install.packages("UsingR")</code>. Here <code>UsingR</code> is the package for the book, <a href="https://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf">Using R for Introductory Statistics</a>. It is a great book, and they’ve very kindly packaged all these data sets together in a single R package. So you need to use <code>UsingR</code> then the library <code>UsingR</code> to get a lot of the data sets that we are going to talk about. So let’s first look at the marginal distribution of the parents. In other words, distribution of
the parents disregarding children. And the marginal distribution of the children, disregarding parents.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="linear-least-squares.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;UsingR&quot;</span>)</span></code></pre></div>
<p>Parent distribution is all heterosexual couples, correcting for sex by multiplying the female heights by 1.08.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="linear-least-squares.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(UsingR); <span class="fu">data</span>(galton); <span class="fu">library</span>(reshape); long<span class="ot">&lt;-</span><span class="fu">melt</span>(galton);</span></code></pre></div>
<pre><code>## Using  as id variables</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="linear-least-squares.html#cb21-1" aria-hidden="true" tabindex="-1"></a>g<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(long, <span class="fu">aes</span>(<span class="at">x=</span>value, <span class="at">fill=</span>variable)) </span>
<span id="cb21-2"><a href="linear-least-squares.html#cb21-2" aria-hidden="true" tabindex="-1"></a>g<span class="ot">&lt;-</span> g<span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">color=</span><span class="st">&#39;black&#39;</span>, <span class="at">binwidth=</span><span class="dv">1</span>)</span>
<span id="cb21-3"><a href="linear-least-squares.html#cb21-3" aria-hidden="true" tabindex="-1"></a>g<span class="ot">&lt;-</span> g<span class="sc">+</span> <span class="fu">facet_grid</span>(.<span class="sc">~</span>variable)</span>
<span id="cb21-4"><a href="linear-least-squares.html#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="linear-least-squares.html#cb21-5" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<p><img src="resources/images/Week01_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>On the left, we have the children’s heights. The X-axis is in inches, the scale goes from 60 inches to 75. The Y-axis is the count, the number of children that fall in each bin of heights. On the right in the more bluish teal color, we have the parents heights. We’ve broken the association by the children and the parents by not doing a scatter plot, and only looking at the marginal distribution of the children, and the marginal distribution of the parents by themselves. We would like to use these distributions to introduce least squares, and then we’ll build on the bivaried association after that. So consider only the child’s height,forget for the moment about using the parent’s height to predict the child’s heights. We just want to find maybe the best prediction of the child’s heights without any other information. Well, probably the best predictor would be the middle and how could one define the middle?</p>
<p>One definition, let <span class="math inline">\(y_i\)</span>, be the height for child <span class="math inline">\(i\)</span>, where in this dataset <span class="math inline">\(i=1,2,...,n=928\)</span>. So the middle is the value of<span class="math inline">\(\mu\)</span> that minimizes <span class="math display">\[\sum_{i=1}^n(y_i-\mu)^2\]</span></p>
<p>That’s how we define the middle. It’s also related to physics in this so called physical center of mass of the histogram that we showed on the previously.
Imagine of those bars as being physical entities, having weight and you are trying to figure out where you would put your finger to balance it out. That would be the physical center of mass. You might have guessed that the center of the data has to be the mean.</p>
<p>Let’s use our studio’s <code>manipulate</code> function to experiment with trying to find that center of mass.</p>
<p>Because we’re using manipulate we can move the slider around and monitor the value of <span class="math inline">\(\mu\)</span> and
the mean squared error, that is the sum of the squared distances between the observed data points and that particular value of <span class="math inline">\(\mu\)</span>. If you move the slider around, you would notice notice as we get toward the center of the histogram, the mean squared error is going down and if you keep moving the slider way up, it get’s up large again. You can see <span class="math inline">\(\mu\)</span> is the point that balanced out this histogram.</p>
<p><strong>Notice</strong>
For those that are interested, we cover some simple proofs of some of the statements made. If this isn’t your thing, just skip these sections. However, if you’re interested, get a pencil and paper to work along!</p>
<p><span class="math display">\[ 
\begin{align} 
\sum_{i=1}^n (Y_i - \mu)^2 &amp; = \
\sum_{i=1}^n (Y_i - \bar Y + \bar Y - \mu)^2 \\ 
&amp; = \sum_{i=1}^n (Y_i - \bar Y)^2 + \
2 \sum_{i=1}^n (Y_i - \bar Y)  (\bar Y - \mu) +\
\sum_{i=1}^n (\bar Y - \mu)^2 \\
&amp; = \sum_{i=1}^n (Y_i - \bar Y)^2 + \
2 (\bar Y - \mu) \sum_{i=1}^n (Y_i - \bar Y)  +\
\sum_{i=1}^n (\bar Y - \mu)^2 \\
&amp; = \sum_{i=1}^n (Y_i - \bar Y)^2 + \
2 (\bar Y - \mu)  (\sum_{i=1}^n Y_i - n \bar Y) +\
\sum_{i=1}^n (\bar Y - \mu)^2 \\
&amp; = \sum_{i=1}^n (Y_i - \bar Y)^2 + \sum_{i=1}^n (\bar Y - \mu)^2\\ 
&amp; \geq \sum_{i=1}^n (Y_i - \bar Y)^2 \
\end{align} 
\]</span></p>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-regression-and-least-squares.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regression-to-the-mean.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
