<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Week 2 | Course Name</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Week 2 | Course Name" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Week 2 | Course Name" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/dasl_favicon.ico" type="image/x-icon" />
<link rel="prev" href="week-01.html"/>
<link rel="next" href="week-3.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="http://jhudatascience.org/"><img src="https://jhudatascience.org/images/dasl.png" style=" width: 80%; padding-left: 40px; padding-top: 8px; vertical-align: top "</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#available-course-formats"><i class="fa fa-check"></i><b>0.1</b> Available course formats</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="week-01.html"><a href="week-01.html"><i class="fa fa-check"></i><b>1</b> Week 01</a>
<ul>
<li class="chapter" data-level="1.1" data-path="week-01.html"><a href="week-01.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="week-01.html"><a href="week-01.html#welcome-to-regression-models"><i class="fa fa-check"></i><b>1.1.1</b> Welcome to Regression Models</a></li>
<li class="chapter" data-level="1.1.2" data-path="week-01.html"><a href="week-01.html#some-basics"><i class="fa fa-check"></i><b>1.1.2</b> Some Basics</a></li>
<li class="chapter" data-level="1.1.3" data-path="week-01.html"><a href="week-01.html#syllabus-xxx"><i class="fa fa-check"></i><b>1.1.3</b> Syllabus (xxx)</a></li>
<li class="chapter" data-level="1.1.4" data-path="week-01.html"><a href="week-01.html#data-science-specialization-community-site"><i class="fa fa-check"></i><b>1.1.4</b> Data Science Specialization Community Site</a></li>
<li class="chapter" data-level="1.1.5" data-path="week-01.html"><a href="week-01.html#where-to-get-more-advanced-material"><i class="fa fa-check"></i><b>1.1.5</b> Where to get more advanced material</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="week-01.html"><a href="week-01.html#introduction-to-regression-and-least-squares"><i class="fa fa-check"></i><b>1.2</b> Introduction to regression and least squares</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="week-01.html"><a href="week-01.html#introduction-to-regression"><i class="fa fa-check"></i><b>1.2.1</b> Introduction to Regression</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="week-01.html"><a href="week-01.html#linear-least-squares"><i class="fa fa-check"></i><b>1.3</b> Linear least squares</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="week-01.html"><a href="week-01.html#notations-and-background"><i class="fa fa-check"></i><b>1.3.1</b> Notations and background</a></li>
<li class="chapter" data-level="1.3.2" data-path="week-01.html"><a href="week-01.html#linear-least-squares-1"><i class="fa fa-check"></i><b>1.3.2</b> Linear Least Squares</a></li>
<li class="chapter" data-level="1.3.3" data-path="week-01.html"><a href="week-01.html#linear-least-squares-coding-example"><i class="fa fa-check"></i><b>1.3.3</b> Linear Least Squares Coding Example</a></li>
<li class="chapter" data-level="1.3.4" data-path="week-01.html"><a href="week-01.html#mathematical-details-optional-xxx"><i class="fa fa-check"></i><b>1.3.4</b> Mathematical Details (Optional) XXX</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="week-01.html"><a href="week-01.html#regression-to-the-mean"><i class="fa fa-check"></i><b>1.4</b> Regression to the Mean</a></li>
<li class="chapter" data-level="1.5" data-path="week-01.html"><a href="week-01.html#practical-r-exercises-in-swirl"><i class="fa fa-check"></i><b>1.5</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="1.6" data-path="week-01.html"><a href="week-01.html#week-1-quiz"><i class="fa fa-check"></i><b>1.6</b> Week 1 Quiz</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="week-2.html"><a href="week-2.html"><i class="fa fa-check"></i><b>2</b> Week 2</a>
<ul>
<li class="chapter" data-level="2.1" data-path="week-2.html"><a href="week-2.html#statistical-linear-regression-models"><i class="fa fa-check"></i><b>2.1</b> Statistical linear regression models</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="week-2.html"><a href="week-2.html#statistical-linear-regression-models-1"><i class="fa fa-check"></i><b>2.1.1</b> Statistical Linear Regression Models</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="week-2.html"><a href="week-2.html#residuals"><i class="fa fa-check"></i><b>2.2</b> Residuals</a></li>
<li class="chapter" data-level="2.3" data-path="week-2.html"><a href="week-2.html#inference-in-regression"><i class="fa fa-check"></i><b>2.3</b> Inference in regression</a></li>
<li class="chapter" data-level="2.4" data-path="week-2.html"><a href="week-2.html#for-the-project"><i class="fa fa-check"></i><b>2.4</b> For the project</a></li>
<li class="chapter" data-level="2.5" data-path="week-2.html"><a href="week-2.html#practical-r-exercises-in-swirl-1"><i class="fa fa-check"></i><b>2.5</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="2.6" data-path="week-2.html"><a href="week-2.html#week-2-quiz"><i class="fa fa-check"></i><b>2.6</b> Week 2 Quiz</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="week-3.html"><a href="week-3.html"><i class="fa fa-check"></i><b>3</b> Week 3</a>
<ul>
<li class="chapter" data-level="3.1" data-path="week-3.html"><a href="week-3.html#multivariable-regression"><i class="fa fa-check"></i><b>3.1</b> Multivariable regression</a></li>
<li class="chapter" data-level="3.2" data-path="week-3.html"><a href="week-3.html#multivariable-regression-tips-and-tricks"><i class="fa fa-check"></i><b>3.2</b> Multivariable regression tips and tricks</a></li>
<li class="chapter" data-level="3.3" data-path="week-3.html"><a href="week-3.html#adjustment"><i class="fa fa-check"></i><b>3.3</b> Adjustment</a></li>
<li class="chapter" data-level="3.4" data-path="week-3.html"><a href="week-3.html#residuals-again"><i class="fa fa-check"></i><b>3.4</b> Residuals again</a></li>
<li class="chapter" data-level="3.5" data-path="week-3.html"><a href="week-3.html#model-selection"><i class="fa fa-check"></i><b>3.5</b> Model selection</a></li>
<li class="chapter" data-level="3.6" data-path="week-3.html"><a href="week-3.html#practical-r-exercises-in-swirl-2"><i class="fa fa-check"></i><b>3.6</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="3.7" data-path="week-3.html"><a href="week-3.html#week-3-quiz"><i class="fa fa-check"></i><b>3.7</b> Week 3 Quiz</a></li>
<li class="chapter" data-level="3.8" data-path="week-3.html"><a href="week-3.html#optional-practice-exercise-in-regression-modeling"><i class="fa fa-check"></i><b>3.8</b> (OPTIONAL) Practice exercise in regression modeling</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="week-4.html"><a href="week-4.html"><i class="fa fa-check"></i><b>4</b> Week 4</a>
<ul>
<li class="chapter" data-level="4.1" data-path="week-4.html"><a href="week-4.html#glm"><i class="fa fa-check"></i><b>4.1</b> GLM</a></li>
<li class="chapter" data-level="4.2" data-path="week-4.html"><a href="week-4.html#logistic-regression"><i class="fa fa-check"></i><b>4.2</b> Logistic Regression</a></li>
<li class="chapter" data-level="4.3" data-path="week-4.html"><a href="week-4.html#poisson-regression"><i class="fa fa-check"></i><b>4.3</b> Poisson Regression</a></li>
<li class="chapter" data-level="4.4" data-path="week-4.html"><a href="week-4.html#hodgepodge"><i class="fa fa-check"></i><b>4.4</b> Hodgepodge</a></li>
<li class="chapter" data-level="4.5" data-path="week-4.html"><a href="week-4.html#practical-r-exercises-in-swirl-3"><i class="fa fa-check"></i><b>4.5</b> Practical R Exercises in swirl</a></li>
<li class="chapter" data-level="4.6" data-path="week-4.html"><a href="week-4.html#week-4-quiz"><i class="fa fa-check"></i><b>4.6</b> Week 4 Quiz</a></li>
<li class="chapter" data-level="4.7" data-path="week-4.html"><a href="week-4.html#course-project-1"><i class="fa fa-check"></i><b>4.7</b> Course Project</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="5" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>5</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by:</a> </p>
<p style="text-align:center;"> <a href="http://jhudatascience.org/"> The Johns Hopkins Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Course Name</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src= "https://github.com/jhudsl/OTTR_Template/raw/main/assets/dasl_thin_main_image.png">
</div>
<div id="week-2" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Week 2</h1>
<div id="statistical-linear-regression-models" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Statistical linear regression models</h2>
<p>Up to this point, we’ve only considered estimation. Estimation is useful, but we also need to know how to extend our estimates to a population. This is the process of statistical inference. Our approach to statistical inference will be through a statistical model. At the bare minimum, we need a few distributional assumptions on the errors. However, we’ll focus on full model assumptions under Gaussianity.</p>
<div id="statistical-linear-regression-models-1" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Statistical Linear Regression Models</h3>
<p>Finding a good regression line using least squares is a mathematical procedure. However, we’d like to do statistics. We’d like to draw emphasis based on our data. In other words we’d like to generalize from our data to a population using statistical models. Consider the probabilistic model for linear regression
<span class="math display">\[Y_i = \beta_0 + \beta_1 X_i + \epsilon_{i}\]</span>
The values of <span class="math inline">\(\beta_0, \beta_1\)</span> are the population parameters that we would like to estimate. <span class="math inline">\(X_i\)</span> is a collection of explanatory variables that we do know, and <span class="math inline">\(\epsilon_i\)</span> is iid Gaussian errors.</p>
<ul>
<li>Here the <span class="math inline">\(\epsilon_{i}\)</span> are assumed iid <span class="math inline">\(N(0, \sigma^2)\)</span>.</li>
</ul>
<p>Understanding independent errors in regression can be approached in various ways. One relatively straightforward interpretation is to consider them as the cumulative effect of unmodeled variables that might collectively influence the response. These unmodeled variables act on the response in a manner that can be statistically modeled as independent and identically distributed Gaussian errors.</p>
<p>Setting aside the complexities of interpretation, let’s focus on the mechanics of working with statistical inference for regression. It’s important to note that the expected value of the response given a specific value of the regressor is simply the line at that regressor, represented as <span class="math inline">\(β_0 + β₁x_i\)</span>. Additionally, the variance of the response at any given value of the regressor is denoted as σ². It’s crucial to clarify that this variance pertains to the variation around the regression line and not the overall response variance. Conditioning on X reduces the variation, making it lower than the unconditional response variance.</p>
<ul>
<li>Note, <span class="math inline">\(E[Y_i ~|~ X_i = x_i] = \mu_i = \beta_0 + \beta_1 x_i\)</span></li>
<li>Note, <span class="math inline">\(Var(Y_i ~|~ X_i = x_i) = \sigma^2\)</span>.</li>
</ul>
<p>Both the expected value and variance mentioned here are population quantities. Although there are sample analogs that estimate these values, it’s essential to recognize that, at this point, we are referring to population quantities—these are the estimands that we ideally want to know.</p>
<p>Now that we have a formal statistical framework, we can interpret our regression coefficients with respect to that framework. Take for example, the intercept. It is the expected value <span class="math inline">\(Y\)</span> given that the regressor is 0. <span class="math display">\[E[Y | X = 0] =  \beta_0 + \beta_1 \times 0 = \beta_0\]</span></p>
<p>Note that the regressor being equal to zero is often not of interest in the study. For example, if the regression variable is blood pressure, probably you’re not interested in the response for among people with blood pressure of zero. However, there is an easy fix for this. Consider just shifting our regression variable by a constant <span class="math inline">\(a\)</span>.
<span class="math display">\[
Y_i = \beta_0 + \beta_1 X_i + \epsilon_i
= \beta_0 + a \beta_1 + \beta_1 (X_i - a) + \epsilon_i
= \tilde \beta_0 + \beta_1 (X_i - a) + \epsilon_i
\]</span>
We see a new regression line with a new intercept and the same slope. So, shifting your <span class="math inline">\(X\)</span> values by value <span class="math inline">\(a\)</span> changes the intercept, but not the slope.</p>
<ul>
<li>Often <span class="math inline">\(a\)</span> is set to <span class="math inline">\(\bar X\)</span> so that the intercept is interpretted as the expected response at the average <span class="math inline">\(X\)</span> value.</li>
</ul>
<p>For slope, we can interpret it as the expected change in response for a 1 unit change in the predictor.
<span class="math display">\[
E[Y ~|~ X = x+1] - E[Y ~|~ X = x] =
\beta_0 + \beta_1 (x + 1) - (\beta_0 + \beta_1 x ) = \beta_1
\]</span>
* Consider the impact of changing the units of <span class="math inline">\(X\)</span>.
<span class="math display">\[
Y_i = \beta_0 + \beta_1 X_i + \epsilon_i
= \beta_0 + \frac{\beta_1}{a} (X_i a) + \epsilon_i
= \beta_0 + \tilde \beta_1 (X_i a) + \epsilon_i
\]</span>
We see a new regression line with a new slope and the same intercept. So, multiplying your <span class="math inline">\(X\)</span> values by value <span class="math inline">\(a\)</span> changes the slope, but not the intercept. For example, <span class="math inline">\(X\)</span> is height in <span class="math inline">\(m\)</span> and <span class="math inline">\(Y\)</span> is weight in <span class="math inline">\(kg\)</span>. Then <span class="math inline">\(\beta_1\)</span> is <span class="math inline">\(kg/m\)</span>. Converting <span class="math inline">\(X\)</span> to <span class="math inline">\(cm\)</span> implies multiplying <span class="math inline">\(X\)</span> by <span class="math inline">\(100 cm/m\)</span>. To get <span class="math inline">\(\beta_1\)</span> in the right units, we have to divide by <span class="math inline">\(100 cm /m\)</span> to get it to have the right units.</p>
<p><span class="math display">\[
X m \times \frac{100cm}{m} = (100 X) cm
~~\mbox{and}~~
\beta_1 \frac{kg}{m} \times\frac{1 m}{100cm} = 
\left(\frac{\beta_1}{100}\right)\frac{kg}{cm}
\]</span></p>
<p>If we would like to guess the outcome at a particular value of the predictor, say <span class="math inline">\(X\)</span>, the regression model guesses <span class="math display">\[\hat \beta_0 + \hat \beta_1 X\]</span></p>
<p>This doesn’t mean that we can only predict at the fitted values. We can predict at any value of <span class="math inline">\(X\)</span> by plugging in the value of <span class="math inline">\(X\)</span> into the equation. However, we’re going to have more reasonable predictions if the value of <span class="math inline">\(X\)</span> that we plug in is in the cloud of data that we used to build the model. Later on, we’ll also talk about how to account for that kind of uncertainty with prediction intervals. But for the time being, let’s just talk about how we get a prediction. Let’s go through an example to interpret the regression
coefficients and show running of the regression coefficient. The dataset is the diamond dataset from the <code>UsingR</code> package. The data is diamond prices in Singapore dollars and diamond weight in carats, which is a standard measure of diamond mass.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="week-2.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(UsingR)</span>
<span id="cb59-2"><a href="week-2.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(diamond)</span>
<span id="cb59-3"><a href="week-2.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb59-4"><a href="week-2.html#cb59-4" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> <span class="fu">ggplot</span>(diamond, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span>
<span id="cb59-5"><a href="week-2.html#cb59-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> g <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Mass (carats)&quot;</span>)</span>
<span id="cb59-6"><a href="week-2.html#cb59-6" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> g <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Price (SIN $)&quot;</span>)</span>
<span id="cb59-7"><a href="week-2.html#cb59-7" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> g <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>)</span>
<span id="cb59-8"><a href="week-2.html#cb59-8" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> g <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>)</span>
<span id="cb59-9"><a href="week-2.html#cb59-9" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> g <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb59-10"><a href="week-2.html#cb59-10" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="resources/images/Week02_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>In this code we assign variable <code>g</code> to the <code>ggplot</code>, the dataset is diamond, the aesthetic has the horizontal axis variable as carat and the y-axis variable as price, we add a layer where the xlab is <code>Mass in carats</code> and the y label price in Singapore dollars. We also add the points of the black background and then a light alpha blending color on top. Afterwards we add a layer that is <code>geom_smooth</code> where <code>method = "lm"</code> will add the regression line. If you omit any arguments, it’s just going to assume the regression
line with <span class="math inline">\(Y\)</span> as the outcome and <span class="math inline">\(X\)</span> as the predictor. Finally, we indicate the color of the regression line as black and call the plot.</p>
<p>Notice what we are plotting is the fitted line, the line that minimizes the sum of the squared vertical distances between the points and the lines.
By default, <code>lm</code> includes an intercept, if you don’t want an intercept, you have to explicitly force it in the model. We also want the dataset to be the diamond dataset in other words, we have to give it the data frame. Otherwise, <code>lm</code> looks in the regular R environment for variables in the model. After running the code it basically just prints out the coefficients <span class="math inline">\(\beta_0, \beta_1\)</span>, which are the intercept and labels it as Intercept and the regression variable for the carat, the slope for the carat regression variable.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="week-2.html#cb61-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> carat, <span class="at">data =</span> diamond)</span>
<span id="cb61-2"><a href="week-2.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(fit)</span></code></pre></div>
<pre><code>## (Intercept)       carat 
##   -259.6259   3721.0249</code></pre>
<p>Let’s look at this <span class="math inline">\(3,721\)</span> variable and try to interpret it. It’s saying that we have an expected <span class="math inline">\(3,721\)</span> Singapore dollar increase in price for every carat increase in mass of the diamond. The intercept, <span class="math inline">\(-259\)</span> is the expected price of a <span class="math inline">\(0\)</span> carat diamond not very interesting, because we’re not interested in zero carat diamonds.</p>
<p><strong>A side note</strong>, if you want a much more detailed printout by doing <code>summary(fit)</code> which is the summary of the outputted variable from <code>lm</code> and you get this more elaborate printout.</p>
<pre><code>## 
## Call:
## lm(formula = price ~ carat, data = diamond)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -85.159 -21.448  -0.869  18.972  79.370 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  -259.63      17.32  -14.99   &lt;2e-16 ***
## carat        3721.02      81.79   45.50   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 31.84 on 46 degrees of freedom
## Multiple R-squared:  0.9783, Adjusted R-squared:  0.9778 
## F-statistic:  2070 on 1 and 46 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>If we mean center our <span class="math inline">\(X\)</span> variable, so that the intercept is on a more interpretable scale. Here we assign the output to a different variable, <code>fit2</code> instead of <code>fit</code>, because we don’t want to overwrite the original <code>fit</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="week-2.html#cb64-1" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> <span class="fu">I</span>(carat <span class="sc">-</span> <span class="fu">mean</span>(carat)), <span class="at">data =</span> diamond)</span>
<span id="cb64-2"><a href="week-2.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(fit2)</span></code></pre></div>
<pre><code>##            (Intercept) I(carat - mean(carat)) 
##               500.0833              3721.0249</code></pre>
<p>As you notice in code: <code>lm</code> is again the linear model procedure, the outcome stays the same and we use <code>carat - mean(carat)</code>, and the <code>I</code> is to indicate that we want to do arithmetic on the variable. So, we want to subtract the mean of the carat variable from the carat variable. This is a way to mean center the variable.
As we expected the slope stays the same, 3,721, but the intercept has changed to <span class="math inline">\(500\)</span>, meaning <span class="math inline">\(\$ 500\)</span>, Singapore dollars is the expected price of the average sized diamond. In this case, the average diamond is about 0.2 carats. A one carat increase is actually kind of big. What about changing the units to one-tenth of a carat? We can do this just by dividing the coefficient by ten. So we know that we would expect to see a <span class="math inline">\(\$372\)</span> increase in price for every <span class="math inline">\(0.1\)</span> of a carat increase in the mass of a diamond.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="week-2.html#cb66-1" aria-hidden="true" tabindex="-1"></a>fit3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> <span class="fu">I</span>(carat<span class="sc">/</span><span class="dv">10</span>), <span class="at">data =</span> diamond)</span>
<span id="cb66-2"><a href="week-2.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(fit3)</span></code></pre></div>
<pre><code>## (Intercept) I(carat/10) 
##   -259.6259  37210.2485</code></pre>
<p>In the linear model fit instead of putting in carat, we put in <span class="math inline">\(carat * 10\)</span>, the units of this new variable is one-tenth of a carat. The data is of course, still the diamond dataset.</p>
<p>Imagine if someone came to you with three new diamonds that they had 0.16 carats, 0.27 carats and 0.35 carats, and they wanted to know what you would estimate the price would be. Well, you could do it manually by grabbing the two coefficients in multiplying the intercept or adding the intercept plus the slope times these new values. Let’s do that:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="week-2.html#cb68-1" aria-hidden="true" tabindex="-1"></a>newx <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.16</span>, <span class="fl">0.27</span>, <span class="fl">0.34</span>)</span>
<span id="cb68-2"><a href="week-2.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> newx</span></code></pre></div>
<pre><code>## [1]  335.7381  745.0508 1005.5225</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="week-2.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(fit, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">carat =</span> newx))</span></code></pre></div>
<pre><code>##         1         2         3 
##  335.7381  745.0508 1005.5225</code></pre>
<p>Often, you don’t want to do even that much coding, you want to more general method, especially when you get lots of regression variables. So there’s this general method called
predict that will take the output from several different kinds of model fits. Linear models are one example, but predict is a generic function, and it applies to several different prediction models. The new data is a <code>data.frame</code> that has the new values of <span class="math inline">\(X\)</span> for the carat variable. Then when we do that, what you’ll see is the same answer. The difference is that it scales up when we have lots of regressors in much more complicated settings. In general, we want to predict using the predict function. If you omit this new data statement if you just do predict fit, it predicts at the observed <span class="math inline">\(X\)</span> values, so it gives you the <span class="math inline">\(\hat Y\)</span> values. If you want it at new <span class="math inline">\(X\)</span> values, you have to give it this new data argument.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="week-2.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(diamond)</span>
<span id="cb72-2"><a href="week-2.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(diamond<span class="sc">$</span>carat, diamond<span class="sc">$</span>price,  </span>
<span id="cb72-3"><a href="week-2.html#cb72-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Mass (carats)&quot;</span>, </span>
<span id="cb72-4"><a href="week-2.html#cb72-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Price (SIN $)&quot;</span>, </span>
<span id="cb72-5"><a href="week-2.html#cb72-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;lightblue&quot;</span>, </span>
<span id="cb72-6"><a href="week-2.html#cb72-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">cex =</span> <span class="fl">1.1</span>, <span class="at">pch =</span> <span class="dv">21</span>,<span class="at">frame =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-7"><a href="week-2.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(fit, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb72-8"><a href="week-2.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(diamond<span class="sc">$</span>carat, <span class="fu">predict</span>(fit), <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb72-9"><a href="week-2.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">c</span>(<span class="fl">0.16</span>, <span class="fl">0.16</span>, <span class="fl">0.12</span>), </span>
<span id="cb72-10"><a href="week-2.html#cb72-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="dv">200</span>, <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.16</span>,</span>
<span id="cb72-11"><a href="week-2.html#cb72-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.16</span>))</span>
<span id="cb72-12"><a href="week-2.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">c</span>(<span class="fl">0.27</span>, <span class="fl">0.27</span>, <span class="fl">0.12</span>), </span>
<span id="cb72-13"><a href="week-2.html#cb72-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="dv">200</span>, <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.27</span>,</span>
<span id="cb72-14"><a href="week-2.html#cb72-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.27</span>))</span>
<span id="cb72-15"><a href="week-2.html#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">c</span>(<span class="fl">0.34</span>, <span class="fl">0.34</span>, <span class="fl">0.12</span>), </span>
<span id="cb72-16"><a href="week-2.html#cb72-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="dv">200</span>, <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.34</span>,</span>
<span id="cb72-17"><a href="week-2.html#cb72-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.34</span>))</span>
<span id="cb72-18"><a href="week-2.html#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(newx, <span class="fu">rep</span>(<span class="dv">250</span>, <span class="dv">3</span>), <span class="at">labels =</span> newx, <span class="at">pos =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="resources/images/Week02_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>To illustrate, here’s our observe data points in blue. The fitted values when we do the predict command, the fitted values in red all of the observed <span class="math inline">\(X\)</span> values and their associated fitted points on the line. These are if we were to draw vertical lines from the observed data points on to the fitted line, they would occur on these red points. When we predicted a new value of <span class="math inline">\(X\)</span>, we’re finding a point along this horizontal axis. In this example we want, 0.16, 0.27 and 0.34. We’re drawing a line up to the fitted regression line and then over to dollars and those are our predicted dollar amounts.</p>
</div>
</div>
<div id="residuals" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Residuals</h2>
</div>
<div id="inference-in-regression" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Inference in regression</h2>
</div>
<div id="for-the-project" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> For the project</h2>
</div>
<div id="practical-r-exercises-in-swirl-1" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Practical R Exercises in swirl</h2>
</div>
<div id="week-2-quiz" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Week 2 Quiz</h2>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="week-01.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="week-3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
